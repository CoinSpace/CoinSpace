openapi: '3.0.3'

info:
  version: 3.0.0
  title: Coin Wallet API V3

servers:
  - url: https://coin.space/api/v3

paths:
  /register:
    post:
      x-eov-operation-id: register
      x-eov-operation-handler: handlers
      description: Register new device
      security: []
      requestBody:
        required: true
        content:
          'application/json':
            schema:
              type: object
              additionalProperties: false
              properties:
                walletId:
                  description: Wallet ID
                  $ref: '#/components/schemas/Hex64String'
                deviceId:
                  description: Device ID
                  $ref: '#/components/schemas/Hex64String'
                pinHash:
                  description: PIN Hash
                  $ref: '#/components/schemas/Hex64String'
              required:
                - walletId
                - deviceId
                - pinHash
      responses:
        '201':
          description: Registration Success
          content:
            'application/json':
              schema:
                allOf:
                  - $ref: '#/components/schemas/PublicToken'
                  - $ref: '#/components/schemas/PrivateToken'
        default:
          $ref: '#/components/responses/GeneralError'
  /logout/others:
    post:
      x-eov-operation-id: logoutOthers
      x-eov-operation-handler: handlers
      description: Logout from others devices
      security:
        - deviceSignature: []
      parameters:
        - $ref: '#/components/parameters/deviceId'
      responses:
        '200':
          $ref: '#/components/responses/SuccessResponse'
        default:
          $ref: '#/components/responses/GeneralError'
  /token/public/pin:
    post:
      x-eov-operation-id: tokenPublicPinVerify
      x-eov-operation-handler: handlers
      description: Get public token
      parameters:
        - $ref: '#/components/parameters/deviceId'
      security: []
      requestBody:
        $ref: '#/components/requestBodies/PIN'
      responses:
        '200':
          description: Public Token
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/PublicToken'
        default:
          $ref: '#/components/responses/GeneralError'
  /token/public/platform:
    get:
      x-eov-operation-id: tokenPublicPlatformOptions
      x-eov-operation-handler: handlers
      description: Get Assertion Options
      parameters:
        - $ref: '#/components/parameters/deviceId'
      security: []
      responses:
        '200':
          $ref: '#/components/responses/AssertionOptionsResponse'
        default:
          $ref: '#/components/responses/GeneralError'
    post:
      x-eov-operation-id: tokenPublicPlatformVerify
      x-eov-operation-handler: handlers
      description: Verify Assertion
      parameters:
        - $ref: '#/components/parameters/deviceId'
      security: []
      requestBody:
        $ref: '#/components/requestBodies/Assertion'
      responses:
        '200':
          $ref: '#/components/responses/AssertionResponse'
        default:
          $ref: '#/components/responses/GeneralError'
  /token/private:
    get:
      x-eov-operation-id: tokenPrivate
      x-eov-operation-handler: handlers
      description: Get Private Token
      security:
        - deviceSignature: []
      parameters:
        - $ref: '#/components/parameters/deviceId'
      responses:
        '200':
          description: Private Token
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/PrivateToken'
        default:
          $ref: '#/components/responses/GeneralError'
  /token/private/pin:
    post:
      x-eov-operation-id: tokenPrivatePinVerify
      x-eov-operation-handler: handlers
      description: Get public token
      security:
        - deviceSignature: []
      parameters:
        - $ref: '#/components/parameters/deviceId'
      requestBody:
        $ref: '#/components/requestBodies/PIN'
      responses:
        '200':
          description: Auth Result
          content:
            'application/json':
              schema:
                oneOf:
                  - $ref: '#/components/schemas/PrivateToken'
                  - $ref: '#/components/schemas/AssertionOptions'
        default:
          $ref: '#/components/responses/GeneralError'
  /token/private/platform:
    get:
      x-eov-operation-id: tokenPrivatePlatformOptions
      x-eov-operation-handler: handlers
      description: Get Assertion Options
      security:
        - deviceSignature: []
      parameters:
        - $ref: '#/components/parameters/deviceId'
      responses:
        '200':
          $ref: '#/components/responses/AssertionOptionsResponse'
        default:
          $ref: '#/components/responses/GeneralError'
    post:
      x-eov-operation-id: tokenPrivatePlatformVerify
      x-eov-operation-handler: handlers
      description: Verify Assertion
      security:
        - deviceSignature: []
      parameters:
        - $ref: '#/components/parameters/deviceId'
      requestBody:
        $ref: '#/components/requestBodies/Assertion'
      responses:
        '200':
          description: Auth Result
          content:
            'application/json':
              schema:
                oneOf:
                  - $ref: '#/components/schemas/PrivateToken'
                  - $ref: '#/components/schemas/AssertionOptions'
        default:
          $ref: '#/components/responses/GeneralError'
  /token/private/crossplatform:
    get:
      x-eov-operation-id: tokenPrivateCrossplatformOptions
      x-eov-operation-handler: handlers
      description: Get Assertion Options
      security:
        - deviceSignature: []
      parameters:
        - $ref: '#/components/parameters/deviceId'
      responses:
        '200':
          $ref: '#/components/responses/AssertionOptionsResponse'
        default:
          $ref: '#/components/responses/GeneralError'
    post:
      x-eov-operation-id: tokenPrivateCrossplatformVerify
      x-eov-operation-handler: handlers
      description: Verify Assertion
      security:
        - deviceSignature: []
      parameters:
        - $ref: '#/components/parameters/deviceId'
      requestBody:
        $ref: '#/components/requestBodies/Assertion'
      responses:
        '200':
          description: Private Token
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/PrivateToken'
        default:
          $ref: '#/components/responses/GeneralError'
  /platform/attestation:
    get:
      x-eov-operation-id: platformAttestationOptions
      x-eov-operation-handler: handlers
      description: Get Attestation Options for Platform Authenticator
      security:
        - walletSignature: []
      parameters:
        - $ref: '#/components/parameters/deviceId'
      responses:
        '200':
          $ref: '#/components/responses/AttestationOptionsResponse'
        default:
          $ref: '#/components/responses/GeneralError'
    post:
      x-eov-operation-id: platformAttestationVerify
      x-eov-operation-handler: handlers
      description: Verify Attestation for Platform Authenticator
      security:
        - walletSignature: []
      parameters:
        - $ref: '#/components/parameters/deviceId'
      requestBody:
        $ref: '#/components/requestBodies/Attestation'
      responses:
        '200':
          $ref: '#/components/responses/AttestationResponse'
        default:
          $ref: '#/components/responses/GeneralError'
  /platform:
    delete:
      x-eov-operation-id: removePlatformAuthenticator
      x-eov-operation-handler: handlers
      description: Remove Authenticator
      parameters:
        - $ref: '#/components/parameters/deviceId'
      security:
        - walletSignature: []
      responses:
        '200':
          $ref: '#/components/responses/SuccessResponse'
        default:
          $ref: '#/components/responses/GeneralError'
  /crossplatform/attestation:
    get:
      x-eov-operation-id: crossplatformAttestationOptions
      x-eov-operation-handler: handlers
      description: Get Attestation Options for Cross-Platform Authenticator
      security:
        - walletSignature: []
      parameters:
        - $ref: '#/components/parameters/deviceId'
      responses:
        '200':
          $ref: '#/components/responses/AttestationOptionsResponse'
        default:
          $ref: '#/components/responses/GeneralError'
    post:
      x-eov-operation-id: crossplatformAttestationVerify
      x-eov-operation-handler: handlers
      description: Verify Attestation for Cross-Platform Authenticator
      security:
        - walletSignature: []
      parameters:
        - $ref: '#/components/parameters/deviceId'
      requestBody:
        $ref: '#/components/requestBodies/Attestation'
      responses:
        '200':
          $ref: '#/components/responses/AttestationResponse'
        default:
          $ref: '#/components/responses/GeneralError'
  /crossplatform:
    get:
      x-eov-operation-id: listCrossplatformAuthenticators
      x-eov-operation-handler: handlers
      description: List Cross-Platform Authenticators
      security:
        - deviceSignature: []
      parameters:
        - $ref: '#/components/parameters/deviceId'
      responses:
        '200':
          description: List of Authenticators
          content:
            'application/json':
              schema:
                type: array
                maxItems: 10
                items:
                  type: object
                  additionalProperties: false
                  properties:
                    credentialID:
                      $ref: '#/components/schemas/Base64UrlString'
                    date:
                      $ref: '#/components/schemas/ISODateString'
                  required:
                    - credentialID
                    - date
        default:
          $ref: '#/components/responses/GeneralError'
    delete:
      x-eov-operation-id: removeCrossplatformAuthenticator
      x-eov-operation-handler: handlers
      description: Remove Authenticator
      parameters:
        - $ref: '#/components/parameters/deviceId'
      security:
        - walletSignature: []
      requestBody:
        required: true
        content:
          'application/json':
            schema:
              type: object
              additionalProperties: false
              properties:
                credentialID:
                  $ref: '#/components/schemas/Base64UrlString'
              required:
                - credentialID
      responses:
        '200':
          $ref: '#/components/responses/SuccessResponse'
        default:
          $ref: '#/components/responses/GeneralError'
  /settings:
    get:
      x-eov-operation-id: getSettings
      x-eov-operation-handler: handlers
      description: Get user Settings
      parameters:
        - $ref: '#/components/parameters/deviceId'
      security:
        - deviceSignature: []
      responses:
        '200':
          description: User Settings
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/Settings'
        default:
          $ref: '#/components/responses/GeneralError'
    patch:
      x-eov-operation-id: setSettings
      x-eov-operation-handler: handlers
      description: Update user Settings
      parameters:
        - $ref: '#/components/parameters/deviceId'
      security:
        - walletSignature: []
      requestBody:
        required: true
        content:
          'application/json':
            schema:
              $ref: '#/components/schemas/Settings'
      responses:
        '200':
          description: Update user Settings result
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/Settings'
        default:
          $ref: '#/components/responses/GeneralError'
  /details:
    get:
      x-eov-operation-id: getDetails
      x-eov-operation-handler: handlers
      description: Get user details
      parameters:
        - $ref: '#/components/parameters/deviceId'
      security:
        - deviceSignature: []
      responses:
        '200':
          description: User datails
          content:
            'application/json':
              schema:
                type: object
                additionalProperties: false
                properties:
                  data:
                    description: User details
                    $ref: '#/components/schemas/Base64String'
                required:
                  - data
        default:
          $ref: '#/components/responses/GeneralError'
    put:
      x-eov-operation-id: setDetails
      x-eov-operation-handler: handlers
      description: Update user details
      parameters:
        - $ref: '#/components/parameters/deviceId'
      security:
        - deviceSignature: []
      requestBody:
        required: true
        content:
          'application/json':
            schema:
              type: object
              additionalProperties: false
              properties:
                data:
                  description: User details
                  $ref: '#/components/schemas/Base64String'
              required:
                - data
      responses:
        '200':
          description: Update user details result
          content:
            'application/json':
              schema:
                type: object
                additionalProperties: false
                properties:
                  data:
                    $ref: '#/components/schemas/Base64String'
                required:
                  - data
        default:
          $ref: '#/components/responses/GeneralError'
  /username:
    put:
      x-eov-operation-id: setUsername
      x-eov-operation-handler: handlers
      description: Update username
      parameters:
        - $ref: '#/components/parameters/deviceId'
      security:
        - deviceSignature: []
      requestBody:
        required: true
        content:
          'application/json':
            schema:
              $ref: '#/components/schemas/UsernameObject'
      responses:
        '200':
          description: Update username result
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/UsernameObject'
        default:
          $ref: '#/components/responses/GeneralError'
  /cryptos:
    get:
      x-eov-operation-id: getCryptos
      x-eov-operation-handler: handlers
      description: Get all cryptos
      parameters:
        - $ref: '#/components/parameters/deviceId'
      security:
        - deviceSignature: []
      responses:
        '200':
          description: List of cryptos
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/CryptoList'
        default:
          $ref: '#/components/responses/GeneralError'
  /ticker:
    get:
      x-eov-operation-id: getTicker
      x-eov-operation-handler: handlers
      description: Get prices of single crypto
      parameters:
        - $ref: '#/components/parameters/deviceId'
        - $ref: '#/components/parameters/cryptoId'
      security:
        - deviceSignature: []
      responses:
        '200':
          description: Ticker for crypro
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/Ticker'
        default:
          $ref: '#/components/responses/GeneralError'
  /tickers:
    get:
      x-eov-operation-id: getTickers
      x-eov-operation-handler: handlers
      description: Get prices of one or more crypto
      parameters:
        - $ref: '#/components/parameters/deviceId'
        - $ref: '#/components/parameters/cryptoIds'
      security:
        - deviceSignature: []
      responses:
        '200':
          description: List of tickers for crypto
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/TickerList'
        default:
          $ref: '#/components/responses/GeneralError'
  /tickers/public:
    get:
      x-eov-operation-id: getTickersPublic
      x-eov-operation-handler: handlers
      description: Get info and price of one or up to 5 crypto
      parameters:
        - in: query
          name: crypto
          required: true
          description: List of Crypto IDs
          style: form
          explode: false
          allowReserved: true
          schema:
            type: array
            minItems: 1
            maxItems: 5
            items:
              $ref: '#/components/schemas/CryptoId'
      security: []
      responses:
        '200':
          description: List of tickers for crypto
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/TickerList'
        default:
          $ref: '#/components/responses/GeneralError'
  /fees:
    get:
      x-eov-operation-id: getFees
      x-eov-operation-handler: handlers
      description: Get transaction fees for coin
      parameters:
        - $ref: '#/components/parameters/deviceId'
        - $ref: '#/components/parameters/cryptoId'
      security:
        - deviceSignature: []
      responses:
        '200':
          description: Fees for coin
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/FeeList'
        default:
          $ref: '#/components/responses/GeneralError'
  /csfee:
    get:
      x-eov-operation-id: getCsFee
      x-eov-operation-handler: handlers
      description: Get transaction cs fees for coin
      parameters:
        - $ref: '#/components/parameters/maybeDeviceId'
        - $ref: '#/components/parameters/cryptoId'
      security:
        - deviceSignature: []
        - apiKey: []
      responses:
        '200':
          description: Fees for coin
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/CsFee'
        default:
          $ref: '#/components/responses/GeneralError'
  /wallet:
    delete:
      x-eov-operation-id: removeWallet
      x-eov-operation-handler: handlers
      description: Remove Wallet
      parameters:
        - $ref: '#/components/parameters/deviceId'
      security:
        - walletSignature: []
      responses:
        '200':
          $ref: '#/components/responses/SuccessResponse'
        default:
          $ref: '#/components/responses/GeneralError'
  /mecto:
    get:
      x-eov-operation-id: searchMecto
      x-eov-operation-handler: handlers
      description: Find nearby mecto users
      parameters:
        - $ref: '#/components/parameters/deviceId'
        - $ref: '#/components/parameters/lat'
        - $ref: '#/components/parameters/lon'
      security:
        - deviceSignature: []
      responses:
        '200':
          description: Nearby mecto users
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/MectoUsers'
        default:
          $ref: '#/components/responses/GeneralError'
    put:
      x-eov-operation-id: saveMecto
      x-eov-operation-handler: handlers
      description: Save mecto
      parameters:
        - $ref: '#/components/parameters/deviceId'
      security:
        - deviceSignature: []
      requestBody:
        required: true
        content:
          'application/json':
            schema:
              $ref: '#/components/schemas/Mecto'
      responses:
        '200':
          $ref: '#/components/responses/SuccessResponse'
        default:
          $ref: '#/components/responses/GeneralError'
    delete:
      x-eov-operation-id: removeMecto
      x-eov-operation-handler: handlers
      description: Remove mecto
      parameters:
        - $ref: '#/components/parameters/deviceId'
      security:
        - deviceSignature: []
      responses:
        '200':
          $ref: '#/components/responses/SuccessResponse'
        default:
          $ref: '#/components/responses/GeneralError'
  /storage/{storageName}:
    get:
      x-eov-operation-id: getStorage
      x-eov-operation-handler: handlers
      description: Get storage
      parameters:
        - $ref: '#/components/parameters/deviceId'
        - $ref: '#/components/parameters/storageName'
      security:
        - deviceSignature: []
      responses:
        '200':
          description: Storage
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/Storage'
        default:
          $ref: '#/components/responses/GeneralError'
    put:
      x-eov-operation-id: setStorage
      x-eov-operation-handler: handlers
      description: Update storage
      parameters:
        - $ref: '#/components/parameters/deviceId'
        - $ref: '#/components/parameters/storageName'
      security:
        - deviceSignature: []
      requestBody:
        required: true
        content:
          'application/json':
            schema:
              $ref: '#/components/schemas/Storage'
      responses:
        '200':
          description: Update storage result
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/Storage'
        default:
          $ref: '#/components/responses/GeneralError'
  /moonpay/sign:
    post:
      x-eov-operation-id: moonpaySign
      x-eov-operation-handler: handlers
      description: Sign moonpay urls
      parameters:
        - $ref: '#/components/parameters/deviceId'
      security:
        - deviceSignature: []
      requestBody:
        required: true
        content:
          'application/json':
            schema:
              $ref: '#/components/schemas/MoonpayUrls'
      responses:
        '200':
          description: Signed urls
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/MoonpayUrls'
        default:
          $ref: '#/components/responses/GeneralError'
  /openalias:
    get:
      x-eov-operation-id: resolveOpenalias
      x-eov-operation-handler: handlers
      description: Resolve openalias domain
      parameters:
        - $ref: '#/components/parameters/deviceId'
        - in: query
          name: hostname
          required: true
          description: Openalias hostname
          schema:
            $ref: '#/components/schemas/Domain'
      security:
        - deviceSignature: []
      responses:
        '200':
          description: Storage
          content:
            'application/json':
              schema:
                type: object
                additionalProperties: false
                properties:
                  address:
                    $ref: '#/components/schemas/AnyCryptoAddress'
                  name:
                    $ref: '#/components/schemas/AnyString256'
                required:
                  - address
                  - name
        default:
          $ref: '#/components/responses/GeneralError'
  /updates:
    get:
      x-eov-operation-id: getUpdates
      x-eov-operation-handler: handlers
      description: Get all releases
      security: []
      responses:
        '200':
          description: Releases
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/UpdateList'
        default:
          $ref: '#/components/responses/GeneralError'
  /update/{distribution}/{arch}/{version}:
    get:
      x-eov-operation-id: getUpdate
      x-eov-operation-handler: handlers
      # for electron on windows
      x-allow-unknown-query-parameters: true
      description: Get release
      parameters:
        - $ref: '#/components/parameters/distribution'
        - $ref: '#/components/parameters/arch'
        - $ref: '#/components/parameters/version'
      security: []
      responses:
        '200':
          description: Release
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/Update'
        default:
          $ref: '#/components/responses/GeneralError'
  /update/win/x64/{version}/RELEASES:
    get:
      x-eov-operation-id: getWinReleases
      x-eov-operation-handler: handlers
      # for electron on windows
      x-allow-unknown-query-parameters: true
      description: Get release
      parameters:
        - $ref: '#/components/parameters/version'
      security: []
      responses:
        '200':
          description: Release content
          content:
            'text/html':
              schema:
                type: string
                pattern: ^.+ https:\/\/.+ \d+$
                maxLength: 2048
        default:
          $ref: '#/components/responses/GeneralError'
  /download/{distribution}/{arch}:
    get:
      x-eov-operation-id: downloadApp
      x-eov-operation-handler: handlers
      description: Get release
      parameters:
        - $ref: '#/components/parameters/distribution'
        - $ref: '#/components/parameters/arch'
      security: []
      responses:
        '200':
          $ref: '#/components/responses/SuccessResponse'
        '302':
          description: Redirect to file
          content:
            'text/plain':
              schema:
                $ref: '#/components/schemas/RedirectString'
          headers:
            Location:
              schema:
                $ref: '#/components/schemas/UrlString'
        default:
          $ref: '#/components/responses/GeneralError'
  /domain/address:
    get:
      x-eov-operation-id: getDomainAddress
      x-eov-operation-handler: handlers
      description: Resolve domain crypto address
      parameters:
        - $ref: '#/components/parameters/deviceId'
        - $ref: '#/components/parameters/cryptoId'
        - in: query
          name: domain
          required: true
          description: Crypto domain
          schema:
            $ref: '#/components/schemas/Domain'
      security:
        - deviceSignature: []
      responses:
        '200':
          description: Crypto address
          content:
            'application/json':
              schema:
                type: object
                additionalProperties: false
                properties:
                  address:
                    $ref: '#/components/schemas/AnyCryptoAddress'
                required:
                  - address
        default:
          $ref: '#/components/responses/GeneralError'
  /exchange/changelly/params:
    get:
      x-eov-operation-id: changellyParams
      x-eov-operation-handler: handlers
      description: Get Changelly pair parameters
      parameters:
        - $ref: '#/components/parameters/deviceId'
        - $ref: '#/components/parameters/cryptoIdFrom'
        - $ref: '#/components/parameters/cryptoIdTo'
      security:
        - deviceSignature: []
      responses:
        '200':
          description: Changelly pair parameters
          content:
            'application/json':
              schema:
                type: object
                additionalProperties: false
                properties:
                  minAmount:
                    $ref: '#/components/schemas/NumberString'
                  maxAmount:
                    $ref: '#/components/schemas/NumberString'
                required:
                  - minAmount
                  - maxAmount
        default:
          $ref: '#/components/responses/GeneralError'
  /exchange/changelly/estimate:
    get:
      x-eov-operation-id: changellyEstimate
      x-eov-operation-handler: handlers
      description: Estimate Changelly rate
      parameters:
        - $ref: '#/components/parameters/deviceId'
        - $ref: '#/components/parameters/cryptoIdFrom'
        - $ref: '#/components/parameters/cryptoIdTo'
        - $ref: '#/components/parameters/amount'
      security:
        - deviceSignature: []
      responses:
        '200':
          description: Changelly estimation
          content:
            'application/json':
              schema:
                type: object
                additionalProperties: false
                properties:
                  rate:
                    $ref: '#/components/schemas/NumberString'
                  result:
                    $ref: '#/components/schemas/NumberString'
                required:
                  - rate
                  - result
        default:
          $ref: '#/components/responses/GeneralError'
  /exchange/changelly/validate:
    get:
      x-eov-operation-id: changellyValidateAddress
      x-eov-operation-handler: handlers
      description: Validate crypto address
      parameters:
        - $ref: '#/components/parameters/deviceId'
        - $ref: '#/components/parameters/cryptoId'
        - $ref: '#/components/parameters/address'
      security:
        - deviceSignature: []
      responses:
        '200':
          description: Changelly address validation
          content:
            'application/json':
              schema:
                type: object
                additionalProperties: false
                properties:
                  isValid:
                    type: boolean
                required:
                  - isValid
        default:
          $ref: '#/components/responses/GeneralError'
  /exchange/changelly/transaction:
    post:
      x-eov-operation-id: changellyCreateTransaction
      x-eov-operation-handler: handlers
      description: Create Changelly transaction
      parameters:
        - $ref: '#/components/parameters/deviceId'
      requestBody:
        required: true
        content:
          'application/json':
            schema:
              type: object
              additionalProperties: false
              properties:
                from:
                  $ref: '#/components/schemas/CryptoId'
                to:
                  $ref: '#/components/schemas/CryptoId'
                amount:
                  $ref: '#/components/schemas/CryptoAmount'
                address:
                  $ref: '#/components/schemas/AnyCryptoAddress'
                refundAddress:
                  $ref: '#/components/schemas/NullableCryptoAddress'
              required:
                - from
                - to
                - amount
                - address
      security:
        - deviceSignature: []
      responses:
        '200':
          description: Changelly transaction
          content:
            'application/json':
              schema:
                type: object
                additionalProperties: false
                properties:
                  id:
                    $ref: '#/components/schemas/AnyString256'
                  depositAmount:
                    $ref: '#/components/schemas/NumberString'
                  depositAddress:
                    $ref: '#/components/schemas/AnyCryptoAddress'
                  extraId:
                    $ref: '#/components/schemas/NullableString256'
                required:
                  - id
                  - depositAmount
                  - depositAddress
        default:
          $ref: '#/components/responses/GeneralError'
  /exchange/changelly/transaction/{transactionId}:
    get:
      x-eov-operation-id: changellyGetTransaction
      x-eov-operation-handler: handlers
      description: Get Changelly transaction
      parameters:
        - $ref: '#/components/parameters/deviceId'
        - $ref: '#/components/parameters/changellyTransactionId'
      security:
        - deviceSignature: []
      responses:
        '200':
          description: Changelly transaction
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/ChangellyTransaction'
        default:
          $ref: '#/components/responses/GeneralError'
  /exchange/changelly/transactions:
    get:
      x-eov-operation-id: changellyGetTransactions
      x-eov-operation-handler: handlers
      description: Get Changelly transactions
      parameters:
        - $ref: '#/components/parameters/maybeChangellyTransactionId'
        - $ref: '#/components/parameters/maybeChangellyCurrency'
        - $ref: '#/components/parameters/maybeChangellyAddress'
        - $ref: '#/components/parameters/changellyLimit'
        - $ref: '#/components/parameters/changellyOffset'
      security:
        - apiKey: []
      responses:
        '200':
          description: Changelly transactions
          content:
            'application/json':
              schema:
                type: array
                maxItems: 100
                items:
                  $ref: '#/components/schemas/ChangellyTransaction'
        default:
          $ref: '#/components/responses/GeneralError'
components:
  schemas:
    Hex64String:
      type: string
      pattern: ^[a-f0-9]{64}$
      maxLength: 64
    Hex128String:
      type: string
      pattern: ^[a-f0-9]{128}$
      maxLength: 128
    Base64String:
      type: string
      pattern: ^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$
      maxLength: 2097152 # 2mb
      nullable: true
    Base64UrlString:
      type: string
      pattern: ^[A-Za-z0-9_-]*$
      maxLength: 2097152 # 2mb
      nullable: true
    UrlString:
      type: string
      pattern: ^(http|https):\/\/.+$
      maxLength: 2048
    RedirectString:
      type: string
      pattern: ^Found\. Redirecting to (http|https):\/\/.+$
      maxLength: 2048
    ISODateString:
      type: string
      pattern: ^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$
      maxLength: 24
    UInt64:
      type: integer
      format: int64
      minimum: 0
      maximum: 9007199254740991
    Latitude:
      type: number
      format: float
      minimum: -90
      maximum: 90
    Longitude:
      type: number
      format: float
      minimum: -180
      maximum: 180
    AvatarId:
      type: string
      pattern: ^(gravatar|identicon):.+$
      maxLength: 256
    AnyCryptoAddress:
      type: string
      pattern: ^.{1,256}$
      maxLength: 256
    NullableCryptoAddress:
      type: string
      pattern: ^.{0,256}$
      maxLength: 256
      nullable: true
    AnyString256:
      type: string
      pattern: ^.{0,256}$
      maxLength: 256
    NullableString256:
      type: string
      pattern: ^.{0,256}$
      maxLength: 256
      nullable: true
    Distribution:
      type: string
      pattern: ^[a-z0-9-]+$
      maxLength: 64
    Arch:
      type: string
      pattern: ^(any|x64)$
      maxLength: 64
    Version:
      type: string
      pattern: ^v.+$
      maxLength: 64
    Price:
      type: number
      format: float
      minimum: 0
      maximum: 9007199254740991
    NumberString:
      type: string
      pattern: ^[0-9]*(\.[0-9]+)?$
      maxLength: 128
    CryptoAmount:
      type: number
      format: float
      minimum: 0
      maximum: 9007199254740991
    PublicToken:
      type: object
      properties:
        publicToken:
          $ref: '#/components/schemas/Hex128String'
      required:
        - publicToken
    PrivateToken:
      type: object
      properties:
        privateToken:
          $ref: '#/components/schemas/Hex128String'
      required:
        - privateToken
    AttestationOptions:
      type: object
      properties:
        challenge:
          $ref: '#/components/schemas/Base64UrlString'
      required:
        - challenge
    AssertionOptions:
      type: object
      properties:
        challenge:
          $ref: '#/components/schemas/Base64UrlString'
      required:
        - challenge
    AuthenticatorAssertionResponse:
      type: object
      additionalProperties: false
      properties:
        authenticatorData:
          $ref: '#/components/schemas/Base64UrlString'
        clientDataJSON:
          $ref: '#/components/schemas/Base64UrlString'
        signature:
          $ref: '#/components/schemas/Base64UrlString'
        userHandle:
          $ref: '#/components/schemas/Base64UrlString'
      required:
        - authenticatorData
        - clientDataJSON
        - signature
    PublicKeyCredentialType:
      type: string
      pattern: ^public-key$
      maxLength: 10
    Username:
      type: string
      pattern: ^[a-z0-9-]+$
      maxLength: 64
    UsernameObject:
      type: object
      additionalProperties: false
      properties:
        username:
          $ref: '#/components/schemas/Username'
      required:
        - username
    Settings:
      type: object
      additionalProperties: false
      properties:
        1faPrivate:
          description: Authorization for private token
          type: boolean
        hasAuthenticators:
          description: Has Cross-Platform Authenticators
          type: boolean
    CryptoId:
      type: string
      pattern: ^.+@.+$
      maxLength: 256
    CryptoIdList:
      type: array
      maxItems: 1000
      items:
        $ref: '#/components/schemas/CryptoId'
    CryptoList:
      type: array
      maxItems: 10000
      items:
        type: object
        properties:
          _id:
            $ref: '#/components/schemas/CryptoId'
          platform:
            type: string
            pattern: ^[a-z-]+$
            maxLength: 256
          platformName:
            type: string
            pattern: ^[A-Za-z\s]+$
            maxLength: 256
          symbol:
            type: string
            pattern: ^[A-Z0-9]+$
            maxLength: 256
          name:
            $ref: '#/components/schemas/AnyString256'
          decimals:
            type: number
            format: int32
            minimum: 0
            maximum: 100
            nullable: true
          logo:
            type: string
            pattern: ^.+\.(svg|png|jpg)$
            maxLength: 256
        required:
          - _id
          - platform
          - symbol
          - name
          - decimals
          - logo
    Ticker:
      type: object
      additionalProperties: false
      properties:
        _id:
          $ref: '#/components/schemas/CryptoId'
        prices:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/Price'
      required:
        - _id
        - prices
    TickerList:
      type: array
      maxItems: 1000
      items:
        $ref: '#/components/schemas/Ticker'
    Fee:
      type: object
      additionalProperties: false
      properties:
        name:
          type: string
          pattern: ^(minimum|default|fastest)$
          maxLength: 64
        value:
          $ref: '#/components/schemas/UInt64'
        default:
          type: boolean
      required:
        - name
        - value
    FeeList:
      type: object
      additionalProperties: false
      properties:
        items:
          type: array
          maxItems: 5
          items:
            $ref: '#/components/schemas/Fee'
      required:
        - items
    CsFee:
      type: object
      additionalProperties: false
      properties:
        fee:
          type: number
          format: float
          minimum: 0
          maximum: 1
        minFee:
          $ref: '#/components/schemas/UInt64'
        maxFee:
          $ref: '#/components/schemas/UInt64'
        rbfFee:
          $ref: '#/components/schemas/UInt64'
        addresses:
          type: array
          maxItems: 128
          items:
            $ref: '#/components/schemas/AnyCryptoAddress'
        whitelist:
          type: array
          maxItems: 32
          items:
            $ref: '#/components/schemas/AnyCryptoAddress'
        skipMinFee:
          type: boolean
      required:
        - fee
        - minFee
        - maxFee
        - rbfFee
        - addresses
        - whitelist
        - skipMinFee
    Mecto:
      type: object
      additionalProperties: false
      properties:
        username:
          $ref: '#/components/schemas/Username'
        avatarId:
          $ref: '#/components/schemas/AvatarId'
        address:
          $ref: '#/components/schemas/AnyCryptoAddress'
        lat:
          $ref: '#/components/schemas/Latitude'
        lon:
          $ref: '#/components/schemas/Longitude'
      required:
        - username
        - avatarId
        - address
        - lat
        - lon
    MectoUsers:
      type: array
      maxItems: 15
      items:
        type: object
        additionalProperties: false
        properties:
          username:
            $ref: '#/components/schemas/Username'
          avatarId:
            $ref: '#/components/schemas/AvatarId'
          address:
            $ref: '#/components/schemas/AnyCryptoAddress'
        required:
          - username
          - avatarId
          - address
    Storage:
      type: object
      additionalProperties: false
      properties:
        data:
          description: Storage
          $ref: '#/components/schemas/Base64String'
      required:
        - data
    MoonpayUrls:
      type: object
      additionalProperties: false
      properties:
        urls:
          type: array
          items:
            $ref: '#/components/schemas/UrlString'
          minItems: 1
          maxItems: 5
    Update:
      type: object
      additionalProperties: false
      properties:
        name:
          $ref: '#/components/schemas/Version'
        version:
          $ref: '#/components/schemas/Version'
        url:
          $ref: '#/components/schemas/UrlString'
        distribution:
          $ref: '#/components/schemas/Distribution'
        arch:
          $ref: '#/components/schemas/Arch'
        app:
          type: string
          pattern: ^(app|electron)$
          maxLength: 64
      required:
        - name
        - version
        - url
    UpdateList:
      type: array
      maxItems: 20
      items:
        $ref: '#/components/schemas/Update'
    Domain:
      type: string
      pattern: ^.+\..+$
      maxLength: 256
    ChangellyTransaction:
      type: object
      additionalProperties: false
      properties:
        id:
          $ref: '#/components/schemas/AnyString256'
        trackUrl:
          $ref: '#/components/schemas/UrlString'
        status:
          $ref: '#/components/schemas/AnyString256'
        amountTo:
          $ref: '#/components/schemas/NumberString'
        amountExpectedTo:
          $ref: '#/components/schemas/NumberString'
        amountFrom:
          $ref: '#/components/schemas/NumberString'
        amountExpectedFrom:
          $ref: '#/components/schemas/NumberString'
        currencyFrom:
          $ref: '#/components/schemas/AnyString256'
        currencyTo:
          $ref: '#/components/schemas/AnyString256'
        createdAt:
          $ref: '#/components/schemas/ISODateString'
        payinAddress:
          $ref: '#/components/schemas/AnyCryptoAddress'
        payinHash:
          $ref: '#/components/schemas/AnyString256'
        payoutAddress:
          $ref: '#/components/schemas/AnyCryptoAddress'
        payoutHashLink:
          $ref: '#/components/schemas/UrlString'
        payoutHash:
          $ref: '#/components/schemas/AnyString256'
        refundAddress:
          $ref: '#/components/schemas/AnyCryptoAddress'
      required:
        - status
        - amountTo
  requestBodies:
    PIN:
      description: PIN Hash
      required: true
      content:
        'application/json':
          schema:
            type: object
            additionalProperties: false
            properties:
              pinHash:
                description: PIN Hash
                $ref: '#/components/schemas/Hex64String'
            required:
              - pinHash
    Attestation:
      description: Attestation Request
      required: true
      content:
        'application/json':
          schema:
            type: object
            properties:
              id:
                $ref: '#/components/schemas/Base64UrlString'
            required:
              - id
    Assertion:
      description: Assertion Request
      required: true
      content:
        'application/json':
          schema:
            type: object
            additionalProperties: false
            properties:
              id:
                $ref: '#/components/schemas/Base64UrlString'
              rawId:
                $ref: '#/components/schemas/Base64UrlString'
              response:
                $ref: '#/components/schemas/AuthenticatorAssertionResponse'
              type:
                $ref: '#/components/schemas/PublicKeyCredentialType'
            required:
              - id
              - rawId
              - response
              - type
  parameters:
    deviceId:
      in: query
      name: id
      required: true
      description: Device ID
      schema:
        $ref: '#/components/schemas/Hex64String'
    maybeDeviceId:
      in: query
      name: id
      required: false
      description: Optional Device ID
      schema:
        $ref: '#/components/schemas/Hex64String'
    cryptoId:
      in: query
      name: crypto
      required: true
      description: Crypto ID
      allowReserved: true
      schema:
        $ref: '#/components/schemas/CryptoId'
    cryptoIdFrom:
      in: query
      name: from
      required: true
      description: Crypto ID
      allowReserved: true
      schema:
        $ref: '#/components/schemas/CryptoId'
    cryptoIdTo:
      in: query
      name: to
      required: true
      description: Crypto ID
      allowReserved: true
      schema:
        $ref: '#/components/schemas/CryptoId'
    cryptoIds:
      in: query
      name: crypto
      required: true
      description: List of Crypto IDs
      style: form
      explode: false
      allowReserved: true
      schema:
        $ref: '#/components/schemas/CryptoIdList'
    amount:
      in: query
      name: amount
      required: true
      description: Amount of crypto
      schema:
        $ref: '#/components/schemas/CryptoAmount'
    address:
      in: query
      name: address
      required: true
      description: Crypto address
      schema:
        $ref: '#/components/schemas/AnyCryptoAddress'
    changellyTransactionId:
      in: path
      name: transactionId
      required: true
      schema:
        $ref: '#/components/schemas/AnyString256'
    maybeChangellyTransactionId:
      in: query
      name: transaction
      required: false
      schema:
        $ref: '#/components/schemas/AnyString256'
    maybeChangellyCurrency:
      in: query
      name: currency
      required: false
      schema:
        $ref: '#/components/schemas/AnyString256'
    maybeChangellyAddress:
      in: query
      name: address
      required: false
      schema:
        $ref: '#/components/schemas/AnyCryptoAddress'
    changellyLimit:
      in: query
      name: limit
      required: false
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 100
    changellyOffset:
      in: query
      name: offset
      required: false
      schema:
        type: integer
        minimum: 0
        default: 0
    lat:
      in: query
      name: lat
      required: true
      description: Latitude
      schema:
        $ref: '#/components/schemas/Latitude'
    lon:
      in: query
      name: lon
      required: true
      description: Longitude
      schema:
        $ref: '#/components/schemas/Longitude'
    storageName:
      in: path
      name: storageName
      schema:
        type: string
        pattern: ^[a-z0-9-]+$
        maxLength: 64
      required: true
      description: Storage name
    distribution:
      in: path
      name: distribution
      schema:
        $ref: '#/components/schemas/Distribution'
      required: true
      description: App distribution
    arch:
      in: path
      name: arch
      schema:
        $ref: '#/components/schemas/Arch'
      required: true
      description: App architecture
    version:
      in: path
      name: version
      schema:
        $ref: '#/components/schemas/Version'
      required: true
      description: App version
  responses:
    AttestationOptionsResponse:
      description: Attestation Options
      content:
        'application/json':
          schema:
            $ref: '#/components/schemas/AttestationOptions'
    AssertionOptionsResponse:
      description: Assertion Options
      content:
        'application/json':
          schema:
            $ref: '#/components/schemas/AssertionOptions'
    AttestationResponse:
      description: Success Attestation Result
      content:
        'application/json':
          schema:
            type: object
            additionalProperties: false
            properties:
              success:
                type: boolean
            required:
              - success
    AssertionResponse:
      description: Success Assertion Result
      content:
        'application/json':
          schema:
            $ref: '#/components/schemas/PublicToken'
    SuccessResponse:
      description: Success Response
      content:
        'application/json':
          schema:
            type: object
            additionalProperties: false
            properties:
              success:
                type: boolean
            required:
              - success
    GeneralError:
      description: Unexpected error
      content:
        'application/json':
          schema:
            type: object
            additionalProperties: false
            required:
              - code
              - error
            properties:
              code:
                type: integer
                format: int32
                minimum: 0
                maximum: 1000
              error:
                type: string
                pattern: ^.{0,16384}$
                maxLength: 16384
  securitySchemes:
    deviceSignature:
      type: apiKey
      in: header
      name: Signature
    walletSignature:
      type: apiKey
      in: header
      name: Signature
    apiKey:
      type: apiKey
      in: query
      name: apikey
